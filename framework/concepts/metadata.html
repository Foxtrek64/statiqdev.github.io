<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="/assets/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/assets/css/styles.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&amp;family=Roboto+Slab:wght@400;700&amp;family=Roboto:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap" rel="stylesheet" data-no-mirror="">
        <link rel="stylesheet" href="/mirror/cdn.jsdelivr.net/npm/prismjs@1.19.0/themes/prism.css">

        <script src="/mirror/code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="/mirror/cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="/mirror/stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/a1cad7ed9a.js" crossorigin="anonymous" data-no-mirror=""></script>
        <script src="/mirror/cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
        <script src="/mirror/cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
        <script src="/mirror/cdn.jsdelivr.net/npm/prismjs@1.19.0/components/prism-core.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror=""></script>
        
		

        <title>Statiq - Metadata</title>
    </head>
    <body class="d-flex flex-column">
        <div class="flex-grow-1 d-flex flex-column">
            <div class="bg-red">
                <div class="container">
                    <div class="text-center text-white p-4">This is an early build of the site and information may not be accurate or complete.</div>
                </div>
            </div>
            <nav id="topnav" class="navbar navbar-expand-lg navbar-light">
                <div class="container py-3">
                    <a class="navbar-brand" href="/"><img id="logo" src="/assets/statiq.svg" alt="Statiq Framework"></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarText">
                        <ul class="navbar-nav mr-auto">
                            <li id="nav-web" class="nav-item">
                                <a class="nav-link text-blue font-weight-light font-size-lg" href="/web">Web</a>
                            </li>
                            <li class="nav-item mx-3 border-right d-none d-lg-block"></li>
                            <li id="nav-docs" class="nav-item">
                                <a class="nav-link text-orange font-weight-light font-size-lg" href="/docs">Docs</a>
                            </li>
                            <li class="nav-item mx-3 border-right d-none d-lg-block"></li>
                            <li id="nav-framework" class="nav-item">
                                <a class="nav-link text-purple font-weight-light font-size-lg" href="/framework">Framework</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="/blog">Blog</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://github.com/statiqdev"><i class="fab fa-github"></i> GitHub</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link font-weight-bold" href="/license">License</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="flex-grow-1 d-flex flex-column section-undefined section-framework">
                    <div id="titlebar" class="py-4">
                        <div class="container">
                            <div class="row">
                                <div class="offset-md-3 offset-lg-2 px-3 px-md-0">
                                    <div class="section text-uppercase">framework</div>
                                    <div class="text-white m-0 title">Metadata</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="undertitle">
                        <div class="container bg-white">                            
                            <div class="row">
                                    <div class="col-md-3 col-lg-2 bg-section">
                                    </div>
                                    <div class="col-md-9 col-lg-8">
                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-section">
                                </div>
                            </div>
                        </div>
                    </div>
                <div class="flex-grow-1 d-flex flex-column">
                        <div class="container flex-grow-1 d-flex flex-column bg-white">
                            <div class="row flex-grow-1 align-items-stretch">
                                        <div class="sidebar col-md-3 col-lg-2 pt-2 bg-body">
                                                <div class="sidebar-nav-item">
                                                    <a href="/framework">About Statiq Framework</a>
                                                </div>
                                                    <div class="sidebar-nav-item has-children">
                                                        <a href="/framework/extensibility">Extensibility</a>
                                                    </div>
                                                        <div class="sidebar-nav-children">
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/extensibility/creating-modules">Creating Modules</a>
                                                                </div>
                                                        </div>
                                                    <div class="sidebar-nav-item has-children">
                                                        <a href="/framework/concepts">Concepts</a>
                                                    </div>
                                                        <div class="sidebar-nav-children active">
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/events">Events</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/documents">Documents</a>
                                                                </div>
                                                                <div class="sidebar-nav-child active">
                                                                    <a href="/framework/concepts/metadata">Metadata</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/modules">Modules</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/pipelines">Pipelines</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/execution">Execution</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/shortcodes">Shortcodes</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/concepts/files">Files and Paths</a>
                                                                </div>
                                                        </div>
                                                    <div class="sidebar-nav-item has-children">
                                                        <a href="/framework/usage">Usage</a>
                                                    </div>
                                                        <div class="sidebar-nav-children">
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/usage/adding-pipelines">Adding Pipelines</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/usage/bootstrapper">Bootstrapper</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/usage/configuration-delegates">Configuration Delegates</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/usage/settings">Settings</a>
                                                                </div>
                                                                <div class="sidebar-nav-child">
                                                                    <a href="/framework/usage/type-conversion">Type Conversion</a>
                                                                </div>
                                                        </div>
                                        </div>
                                        <div class="col-md-9 col-lg-8 p-4 pt-md-0">
                                            <p>Metadata is the primary way information is passed though modules and pipelines via documents.</p>
<p>Along with its content, every <a href="/framework/concepts/documents">document</a> contains <em>metadata</em>. As with documents, metadata is immutable and you must clone a document to add additional metadata. Several <a href="/framework/concepts/modules">modules</a>, such as <code>SetMetadata</code>, are designed to allow you to manipulate document metadata as part of your <a href="/framework/concepts/pipelines">pipeline</a>.</p>
<h1 id="defining-metadata">Defining Metadata</h1>
<h2 id="front-matter">Front Matter</h2>
<p>One of the more common ways to set metadata is to use <em>front matter</em>. Front matter is a common concept in static generators and gets around the problem of how to define metadata for a file without creating a whole separate file. Typically, front matter is placed at the top of an input file and uses some sort of format (like YAML or JSON) to define key/value pairs. In Statiq, front matter can be extracted using the <code>ExtractFrontMatter</code> module. That module accepts child modules that process whatever content is contained in the front matter block, such as YAML or JSON. Often front matter is delimited from the actual file content by a series of dashes such as <code>---</code>, though an alternate delimiter can be specified in the module.</p>
<p>A file that contains front matter might look like this:</p>
<pre><code class="language-txt">Title: Some Title
Description: This is a description.
Date: 5/25/2016
---
This is the content of the file.
</code></pre>
<p>An example of front matter usage would be using metadata to define tags for your blog posts. You could create a "Tags" metadata field in the front matter of your post file and then read that metadata later to create tag clouds, lists of similar posts, etc.</p>
<p>Practically, the <code>ParseYaml</code> module is usually used as the child of the <code>ExtractFrontMatter</code> module. However, like most things in Statiq Framework this is designed to be flexible. You could process any type of front matter (JSON, etc.) with this setup by specifying different child modules.</p>
<h2 id="lazy-values">Lazy Values</h2>
<p>In more advanced scenarios you sometimes want to defer figuring out the value of a metadata item until it's accessed. This can help when the data to determine the value isn't available yet, when computing the value would be expensive and you don't know if it'll actually need to be accessed, or you want to compute a fresh value each time it's accessed. This can be accomplished by implementing <code>IMetadataValue</code>. If an object that implements that interface is added as a metadata value, it's <code>object Get(IMetadata metadata)</code> method will be called when the value is requested (the <code>metadata</code> argument is the current metadata object, for example the <a href="/framework/concepts/documents">document</a>).</p>
<h2 id="computed-values">Computed Values</h2>
<p>There are <em>many</em> cases where being able to define metadata as a computed value can be valuable. You can define computed metadata with "fat arrow" syntax. For example, placing this in the front matter of a document will result in an <code>int</code> of "3" being returned for the "MyNumber" metadata key:</p>
<pre><code class="language-txt">MyNumber: =&gt; 1 + 2
---
My number is &lt;?#= MyNumber /?&gt;.
</code></pre>
<p>The actual value should be a string (the YAML syntax above assumes a string value) that starts with <code>=&gt;</code> and is a full C# script. It can even include multiple statements:</p>
<pre><code class="language-txt">MyNumber: "=&gt; { int x = 1 + 2; int y = x; return y; }"
</code></pre>
<p>The script also a number of predefined global properties available to it (see the <code>ScriptBase</code> class in <code>Statiq.Core</code> for all script properties):</p>
<ul>
<li><p><code>ExecutionState</code> contains the current <code>IExecutionState</code> object.</p>
</li>
<li><p><code>Context</code> (and the <code>ctx</code> shorthand) contain the current <a href="/framework/concepts/execution#execution-context">execution context</a>.</p>
</li>
<li><p><code>Document</code> (and the <code>doc</code> shorthand) contain the current <a href="/framework/concepts/documents">document</a>.</p>
</li>
<li><p><code>PipelineName</code>: Gets the name of the currently executing pipeline.</p>
</li>
<li><p><code>Pipeline</code>: Gets the currently executing pipeline.</p>
</li>
<li><p><code>Phase</code>: Gets the currently executing <a href="/framework/concepts/pipelines#phases">phase</a> of the current pipeline.</p>
</li>
<li><p><code>Parent</code>: Gets the parent execution context if currently in a nested <a href="/framework/concepts/modules">module</a>.</p>
</li>
<li><p><code>Module</code>: Gets the current executing <a href="/framework/concepts/modules">module</a>.</p>
</li>
<li><p><code>Inputs</code>: The collection of input <a href="/framework/concepts/documents">documents</a> to the current <a href="/framework/concepts/modules">module</a>.</p>
</li>
</ul>
<p>In addition, all metadata values of the current document are exposed as properties in the script. For example, if a document has a metadata item with a key of "MyItem", a global property <code>MyItem</code> will be available to the script.</p>
<h2 id="config-metadata">Config Metadata</h2>
<p>Adding a Another way of accessing the current <a href="/framework/concepts/documents">document</a> or <a href="/framework/concepts/execution#execution-context">execution context</a> while computing a lazy metadata value is</p>
<h1 id="accessing-metadata">Accessing Metadata</h1>
<p>Every <a href="/framework/concepts/documents">document</a> acts like a dictionary and implements <code>IReadOnlyDictionary&lt;string, object&gt;</code> for easy access. Metadata key/value pairs can be accessed through this interface.</p>
<h2 id="type-conversion">Type Conversion</h2>
<p>All metadata is represented internally as raw objects. This allows you to store not just strings, but more complex data as well. However, when you access metadata you probably don't want to think about how it's stored or what the original type was. For example, YAML doesn't really distinguish between numbers and strings when it reads data, it's only when getting a value that you care. To make metadata as easy to work with as possible, Statiq Framework includes a very powerful <a href="/framework/usage/type-conversion">type conversion capability</a> that lets you convert nearly any metadata value to any other compatible type. For example, when you call <code>IMetadata.Get&lt;TValue&gt;(string key)</code> it doesn’t matter what the underlying type of the metadata is because the type converter will convert it to the requested <code>TValue</code> type if at all possible.</p>
<h2 id="raw-values">Raw Values</h2>
<h2 id="metadata-lookup">Metadata Lookup</h2>
<p>There are several extensions to make working with documents and metadata easier. One of the more powerful ones lets you generate an <code>ILookup&lt;T, IDocument&gt;</code> from a sequence of documents based on a metadata key. The signature of the extension method is <code>ILookup&lt;T, IDocument&gt; ToLookup&lt;T&gt;(this IEnumerable&lt;IDocument&gt; documents, string key)</code> where <code>key</code> is the metadata key that you want to generate a lookup for.</p>
<p>For example, say you have a sequence of documents, some of which contain metadata for the key "Tags". Also, assume that some of the documents with "Tags" metadata contain a single value some contain arrays. If you simply call <code>Documents.ToLookup&lt;string&gt;("Tags")</code> you will get back an <code>ILookup&lt;T, IDocument&gt;</code> keyed by each possible tag string with a sequence of the documents that contain that tag as the value.</p>

                                        </div>
                                <div class="col-lg-2 d-none d-lg-block bg-body pl-3 pt-3">
                                            <div class="border-bottom mb-3">
                                                <p class="small font-weight-bold">On This Page</p>
                                                    <p class="small"><a href="#defining-metadata">Defining Metadata</a></p>
                                                    <p class="small"><a href="#accessing-metadata">Accessing Metadata</a></p>
                                            </div>
                                        <p class="small font-weight-bold"><a href="https:/github.com/statiqdev/statiqdev.github.io/edit/develop/input/framework/concepts/metadata.md"><i class="fad fa-pencil"></i> Edit This Page</a></p>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>
        <div id="footer" class="p-3 text-white font-size-sm">
            <div class="container">
                <div>© 2020 Statiq/Dave Glick</div>
            </div>
        </div>
        <script>
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
            });
        </script>
    
</body></html>